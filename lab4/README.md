<h1>Лабораторная работа No 4: Задача производители-потребители для процессов</h1>

<h2>Условие задания</h2>

<p>Основной процесс создает очередь сообщений и ожидает нажатия клавиш, порождая и завершая процессы двух типов — производителей и потребителей. Очередь сообщений представляет собой кольцевой буфер, содержащий указатели на сообщения, счетчики добавленных и извлеченных сообщений.</p>

<h3>Формат сообщений</h3>

<ul>
    <li><strong>type</strong> (1 байт) - тип сообщения.</li>
    <li><strong>hash</strong> (2 байта) - контрольные данные.</li>
    <li><strong>size</strong> (1 байт) - длина данных в байтах (от 0 до 256).</li>
    <li><strong>data</strong> - данные сообщения, выровненные до ближайшего кратного четырём размера.</li>
</ul>

<h3>Генерация сообщений</h3>

<p>Производители генерируют сообщения, используя системный генератор <code>rand(3)</code>, чтобы определить размер (<code>size</code>) и данные (<code>data</code>). Размер сообщения (<code>size</code>) вычисляется как остаток от деления на 257. Если остаток равен 256, размер сообщения устанавливается в 0, что приводит к длине сообщения в 256 байт.</p>

<p>Контрольные данные (<code>hash</code>) формируются из всех байтов сообщения.</p>

<h3>Семафоры и мьютексы</h3>

<p>Для синхронизации доступа к очереди используются два семафора (<code>emptySpaceCount</code> и <code>filledSpaceCount</code>) и мьютекс (или одноместный семафор).</p>

<h3>Действия производителей и потребителей</h3>

<ul>
    <li><strong>Производители</strong> формируют и добавляют сообщения в очередь, увеличивая счетчик добавленных сообщений после каждой операции.</li>
    <li><strong>Потребители</strong> извлекают сообщения из очереди, проверяют контрольные данные и увеличивают счетчик извлеченных сообщений.</li>
</ul>

<h3>Завершение работы процессов</h3>

<p>Процессы должны завершить свою работу при получении сигнала о завершении, завершая текущую операцию перед выходом.</p>

<h3>Дополнительные требования</h3>

<ul>
    <li>Предусмотреть задержки для обеспечения возможности просмотра вывода в процессе выполнения программы.</li>
    <li>Обеспечить защиту от тупиковых ситуаций, возникающих из-за отсутствия производителей или потребителей.</li>
    <li>Предусмотреть возможность просмотра текущего состояния очереди и процессов при помощи нажатия определенной клавиши.</li>
</ul>

<h2>Запуск и компиляция через Makefile</h2>

<p>Для компиляции программы используйте следующие команды:</p>

<pre><code>make all  # Компиляция всех исходных файлов
./program  # Запуск программы
make clean  # Очистка скомпилированных объектных файлов и исполняемого файла
</code></pre>
